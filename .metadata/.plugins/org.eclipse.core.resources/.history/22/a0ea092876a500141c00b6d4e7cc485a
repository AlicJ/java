package lab3;

import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;

public class VarianceAccumulatorTest {
	
	@Before
	public void setup() {
		int n;
		VarianceAccumulator a;
		double[] v;
		double total;
		double mean;
		double s;
		double stddev;
	}

	@Test
	public void test() {
		n = 1000;
		a = new VarianceAccumulator();
		v = new double[n];
		total = 0;
		
		for (int i = 0; i < n; i++) {
			double x = StdRandom.uniform();
			v[i] = x;
			total += x;
			a.addDataValue(x);
		}
		
		mean = total / n;
		s = 0;
		
		for (int i = 0; i < n; i++) {
			double d = v[i] - mean;
			s += d * d;
		}
		
		stddev = Math.sqrt(s / (n-1));
		
		assertEquals(mean, a.mean(), 1e-10);
		assertEquals(stddev, a.stddev(), 1e-10);
	}
	
	@Test
	public void realTest() {
		for (int i=0; i<1000; i++) {
			test();
		}
	}

}
