package sort;

import static org.junit.Assert.*;

import java.io.File;
import java.io.FileNotFoundException;
import java.nio.file.Path;
import java.util.Arrays;
import java.util.Scanner;

import org.apache.commons.lang3.time.StopWatch;
import org.junit.Before;
import org.junit.Test;

public class SortTest {
	private Word[] word16 = new Word[16];
	private Word[] word256 = new Word[256];
	private Word[] word4096 = new Word[4096];
	private Word[][] inputWord = {new Word[16], new Word[256], new Word[4096]};
	
	public boolean isEmpty(Word[] x) {
		for (int i=0; i<x.length; i++) {
			if (x[i] == null) return true;
		}
		return false;
	}

	@Before
	public void setup() throws FileNotFoundException {
		// read input file and convert everything to array of Word
		Scanner input = new Scanner(new File("data/a2_in.txt"));
		
		for (int i=0; i<3; i++) {
			// read a line
			String line = input.nextLine();
			String[] data = line.split(",");
//			System.out.println("i=" + i);
			for(int j=0; j<data.length; j++) {
				if (j%2 != 0) {
					// odd number element -> ranking
					// get the previous element, the word
					String str = data[j-1].substring(1);
					// get rid of "}" at the end of the ranking
					String rank = data[j];
					rank = rank.substring(0, rank.length()-1);
					// and construct a Word with the previous element
					Word word = new Word(str, Integer.parseInt(rank));
//					System.out.println(word);
//					System.out.println("j=" + j);
					inputWord[i][(int) Math.floor(j/2)] = word;
				}
			}
//			System.out.println(Arrays.toString(wordInput[i]));
//			System.out.println(isEmpty(wordInput[i]));
		}
	}
	
	@Test
	public void testSortInsert() {
		StopWatch sw = new StopWatch();
		sw.start();
		for (int i=0; i<3; i++) {
			long startTime = sw.getTime();
			Insertion.sortInsert(inputWord[i]);
			long endTime = sw.getTime();
			System.out.println("Insertion sort);
			System.out.println(endTime - startTime);
			System.out.println(Insertion.isSorted(inputWord[i]));
		}
		sw.stop();
	}
	
	@Test
	public void testInsertComparable() {
		StopWatch sw = new StopWatch();
		sw.start();
		for (int i=0; i<3; i++) {
			long startTime = sw.getTime();
			Insertion.sortComparable(inputWord[i]);
			long endTime = sw.getTime();
			System.out.println(endTime - startTime);
			System.out.println(Insertion.isSorted(inputWord[i]));
		}
		sw.stop();
	}
	
	@Test
	public void testInsertBinary() {
		StopWatch sw = new StopWatch();
		sw.start();
		for (int i=0; i<3; i++) {
			long startTime = sw.getTime();
			Insertion.sortBinary(inputWord[i]);
			long endTime = sw.getTime();
			System.out.println(endTime - startTime);
			System.out.println(Insertion.isSorted(inputWord[i]));
		}
		sw.stop();
	}
	
	@Test
	public void testMerge() {
		StopWatch sw = new StopWatch();
		sw.start();
		for (int i=0; i<3; i++) {
			long startTime = sw.getTime();
			Merge.sortMerge(inputWord[i]);
			long endTime = sw.getTime();
			System.out.println(endTime - startTime);
			System.out.println(Merge.isSorted(inputWord[i]));
		}
		sw.stop();
	}
	
	@Test
	public void testHeapSort() {
		StopWatch sw = new StopWatch();
		sw.start();
		for (int i=0; i<3; i++) {
			long startTime = sw.getTime();
			Heap.sortHeap(inputWord[i]);
			long endTime = sw.getTime();
			System.out.println(endTime - startTime);
			System.out.println(Heap.isSorted(inputWord[i]));
		}
		sw.stop();
	}

}
